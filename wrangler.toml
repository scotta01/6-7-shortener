name = "url-shortener"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# KV Namespace for storing URL mappings
[[kv_namespaces]]
binding = "URL_STORE"
id = "preview_id"  # Replace with actual KV namespace ID after: wrangler kv:namespace create URL_STORE

# Production KV namespace (use different namespace for prod)
# [[kv_namespaces]]
# binding = "URL_STORE"
# id = "production_id"

# Environment variables
[vars]
BASE_URL = "http://localhost:8787"  # Update to your custom domain in production
DEFAULT_TTL = "0"                    # 0 = no expiration
CODE_LENGTH = "6"
RATE_LIMIT = "100"                   # Requests per minute per IP
ENVIRONMENT = "development"

# Development configuration
[dev]
port = 8787
local_protocol = "http"

# Production deployment configuration
# Uncomment and configure for production
# [env.production]
# vars = { BASE_URL = "https://yourdomain.com", ENVIRONMENT = "production" }
# [[env.production.kv_namespaces]]
# binding = "URL_STORE"
# id = "your_production_kv_id"
